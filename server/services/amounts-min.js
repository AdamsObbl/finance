const db=require("./db"),config=require("../config");async function get(){return await db.query("SELECT * FROM finance_amounts")||[]}async function getLast({user_id:n}){return await db.query(`SELECT * FROM finance_amounts\n        WHERE user_id = ${n}\n        AND status = 1\n        ORDER BY date_delete DESC\n        limit 1;\n        `)||[]}async function add({description:n,user_id:t,amount:e}){const[a]=await db.query(`INSERT INTO finance_amounts(user_id, amount, description, status, date_create, date_change, date_delete)\n    VALUES(${t}, ${e}, '${n}', '0', now(), '0000-00-00 00:00:00', '0000-00-00 00:00:00')\n    RETURNING id;`);return a.id}async function change({id:n,status:t,amount:e,description:a}){const d=`UPDATE finance_amounts SET\n        ${e?`amount='${e}',`:""}\n        ${a?`description='${a}',`:""}\n        status = '${t||0}',\n        date_delete = ${1===t?"now()":"'0000-00-00 00:00:00',"}\n        ${1===t?"":"date_change = now()"}\n        WHERE id = '${n}';`;return await db.query(d)}module.exports={get:get,add:add,change:change,getLast:getLast};